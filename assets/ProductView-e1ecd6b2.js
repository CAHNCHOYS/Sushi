import{_ as I,r as g,C as M,D as $,a as l,o,c as n,d as t,b as p,g as u,i as s,t as c,k as D,v as T,e as d,w as i,T as f,h as k,p as z,l as F,G as U}from"./index-a3469fee.js";const S=_=>(z("data-v-d145f6b3"),_=_(),F(),_),j={class:"product-page"},q={class:"product-page__back-button"},H={class:"product-page__product-body"},J={key:1,class:"product-page__product-content product"},K={class:"product__row"},O={class:"product__picture-col"},Q={class:"product__picture _ibg"},R=["src","alt"],W={class:"product__info-col"},X={class:"product__name"},Y={class:"product__size"},Z={class:"product__actions"},ee={class:"product__price"},te={class:"product__current-price"},oe={key:0,class:"product__old-price"},se={class:"product__count count-product"},ce={class:"count-product__row"},de={class:"count-product__number"},ae={key:0,class:"product__consist"},re=S(()=>t("h3",null,"Состав",-1)),ne={class:"product__add-to-cart"},ue={key:3},ie={key:0,class:"product-page__recommended-products recomended-products"},_e=S(()=>t("div",{class:"recomended-products__title"},"Рекомендованные товары",-1)),le={class:"recomended-products__slider"},pe={__name:"ProductView",props:{id:Number,name:String},setup(_){const v=_,e=g(null),m=g(!1),y=g(!1),P=g("Произошла ошибка(");M([()=>v.name,()=>v.id],async()=>{m.value=!0,e.value=null;const a=await U(v.name,v.id);a.length&&(e.value=a[0],e.value.count=1),a.err&&(P.value=a.err,y.value=!0,console.log(a.err)),m.value=!1},{immediate:!0});const{isActionLoading:b,isNotLoggedUser:x,isProductAdded:B,actionErrorMessage:C,isAddProductError:A,addProductAction:E}=$();return(a,r)=>{const N=l("VGoBackButton"),V=l("LoadingGif"),h=l("VAlert"),G=l("VErrorMessage"),L=l("ProductsSlider");return o(),n("div",j,[t("div",q,[p(N)]),t("div",H,[m.value?(o(),u(V,{key:0})):s("",!0),e.value?(o(),n("div",J,[t("div",K,[t("div",O,[t("div",Q,[t("img",{src:`https://sushi-backend-henna.vercel.app/Products/${e.value.image}`,alt:e.value.name},null,8,R)])]),t("div",W,[t("div",X,c(e.value.name),1),t("div",Y,c(e.value.textSize),1),t("div",Z,[t("div",ee,[t("div",te,c(e.value.Price*e.value.count)+"₽ ",1),e.value.oldPrice?(o(),n("div",oe,c(e.value.oldPrice*e.value.count)+"₽ ",1)):s("",!0)]),t("div",se,[t("div",ce,[t("div",{class:"count-product__action count-product__action_minus",onClick:r[0]||(r[0]=w=>e.value.count<=1?"":e.value.count--)}),t("div",de,c(e.value.count),1),t("div",{class:"count-product__action icon-plus",onClick:r[1]||(r[1]=w=>e.value.count++)})])])]),e.value.consists?(o(),n("div",ae,[re,t("p",null,c(e.value.consists),1)])):s("",!0),t("div",ne,[D(t("button",{class:"btn icon-cart",onClick:r[2]||(r[2]=w=>d(E)({product_id:e.value.product_id,count:e.value.count,name:e.value.name,image:e.value.image,Price:e.value.Price}))}," Хочу! ",512),[[T,!d(b)]])]),d(b)?(o(),u(V,{key:1,class:"product__action-load"})):s("",!0),p(f,{name:"product-message"},{default:i(()=>[d(B)?(o(),u(h,{key:0,position:"static",type:"success"},{default:i(()=>[k(" Товар добавлен в корзину! ")]),_:1})):s("",!0)]),_:1}),p(f,{name:"product-message"},{default:i(()=>[d(A)?(o(),u(h,{key:0,position:"static",type:"error"},{default:i(()=>[k(c(d(C)),1)]),_:1})):s("",!0)]),_:1}),p(f,{name:"product-message"},{default:i(()=>[d(x)?(o(),u(h,{key:0,position:"static",type:"info"},{default:i(()=>[k(" Для добавления товара в корзину необходимо сначала войти в аккаунт! ")]),_:1})):s("",!0)]),_:1})])])])):s("",!0),y.value?(o(),u(G,{key:2,style:{"margin-bottom":"20px"},"err-message":P.value},null,8,["err-message"])):!m.value&&!e.value?(o(),n("p",ue," Не удалось найти товар с таким именем и айди, проверьте ссылку! ")):s("",!0)]),e.value?(o(),n("div",ie,[_e,t("div",le,[p(L,{"recommended-products":e.value.recommendedCat},null,8,["recommended-products"])])])):s("",!0)])}}},me=I(pe,[["__scopeId","data-v-d145f6b3"]]);export{me as default};
