import{_ as $,F as q,X as J,r,J as K,a as S,o as c,c as a,u as o,b as t,w as C,f as N,e as d,d as e,S as B,V as F,n as y,t as O,K as W,Y as X,g as Y,p as Z,h as j,Z as A}from"./index-e6c5bcf0.js";import{c as H,F as Q,a as s,E as _}from"./vee-validate.esm-adae6640.js";import{u as ee}from"./useFormSchemas-a3ddd8f3.js";const oe=""+new URL("PizzaOrder-3619b994.png",import.meta.url).href;const u=f=>(Z("data-v-b1a62604"),f=f(),j(),f),te={class:"checkout-info"},ce={key:0,class:"checkout-info__items"},se={key:0,class:"checkout-info__body"},ae=u(()=>e("div",{class:"checkout-info__title"},"Ваши данные",-1)),_e={class:"checkout-form__row"},ne={class:"checkout-form__col"},re={class:"checkout-form__elements"},le={class:"checkout-form__element"},ie={class:"checkout-form__element"},ue={class:"checkout-form__tabs form-tab"},me={class:"form-tab__tab-menu"},de=["onClick"],he={class:"form-tab__all-tabs"},fe={key:0,class:"form-tab__tab"},ve={class:"checkout-form__elements"},pe={class:"checkout-form__elem-row"},ke={class:"checkout-form__checkbox"},be=u(()=>e("div",{class:"checkout-form__checkbox-emulator"},null,-1)),ge=u(()=>e("div",{class:"checkout-form__checkbox-text"}," Подготовить сдачу с ",-1)),ye={class:"checkout-form__input-col"},we={key:1,class:"form-tab__tab"},xe={class:"checkout-form__elements"},Se={class:"checkout-form__element"},Ce={class:"checkout-form__elem-row"},Ne={class:"checkout-form__elem-col"},Be={class:"checkout-form__elem-col"},Fe={class:"checkout-form__element"},Oe={class:"checkout-form__element"},Ve=u(()=>e("div",{class:"checkout-form__element"},null,-1)),ze={class:"checkout-form__col"},Ie={class:"checkout-form__tabs form-tab"},Te={class:"form-tab__tab-menu"},Le=["onClick"],Me={class:"form-tab__all-tabs"},Re={key:0,class:"form-tab__tab"},Ue={class:"checkout-form__elements"},Ee={class:"checkout-form__grid"},Pe={class:"checkout-form__grid-col checkout-form__grid-col_big"},De={class:"checkout-form__grid-col"},Ge={class:"checkout-form__grid-col"},$e={class:"checkout-form__grid-col"},qe={class:"checkout-form__grid-col"},Je={class:"checkout-form__grid-col"},Ke={key:1,class:"form-tab__tab"},We={class:"checkout-form__elements"},Xe={class:"checkout-form__elem-row"},Ye={class:"checkout-form__elem-col"},Ze={class:"checkout-form__elem-col"},je={key:0,class:"checkout-form__submit"},Ae=u(()=>e("div",{class:"checkout-form__rights"}," Оформите заказ ! прямо сейчас ",-1)),He={key:1,class:"checkout-info__order-done done-order"},Qe=u(()=>e("div",{class:"done-order__image _ibg"},[e("img",{src:oe,alt:"Pizza picture"})],-1)),eo=u(()=>e("div",{class:"done-order__text"}," Ваш заказ был успешно оформлен, готовьте деньги! ",-1)),oo=[Qe,eo],to={key:1,class:"checkout-info__no-items no-items"},co=u(()=>e("div",{class:"no-items__title"}," Невозможно оформить заказ с пустой козиной! ",-1)),so={class:"no-items__button"},ao={__name:"CheckoutView",setup(f){const p=q(),V=J();H({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!0,validateOnModelUpdate:!0});const{orderSchemaCashByCourier:z,orderShemaCardByCourier:I,orderSchemaCashBySelf:T,orderSchemaCardBySelf:L}=ee(),l=r(1),M=r([{text:"Наличка",icon:"icon-Frame-11",tabNumber:1},{text:"Карта",icon:"icon-credit-cart",tabNumber:2}]),i=r(1),R=r([{text:"Курьером",tabNumber:1},{text:"Самовывоз",tabNumber:2}]),U=K(()=>{if(i.value===1&&l.value===1)return console.log("y"),z;if(i.value===2&&l.value===1)return console.log("yy"),T;if(i.value===1&&l.value===2)return console.log("yyy"),I;if(i.value===2&&l.value===2)return console.log("yyyy"),L}),k=r(!1),b=r(!1),w=r(!1),v=r(!1),x=r(!1),E=async h=>{console.log(h),v.value=!0,h.promo&&p.updateUserPromo(h.promo);const m=await p.commitOrder();m.length&&(x.value=!0),m.err&&(w.value=!0,setTimeout(()=>w.value=!1,2500)),v.value=!1},P=({values:h,errors:m,results:g})=>{console.log(h),console.log(m),console.log(g),b.value=!0,setTimeout(()=>b.value=!1,500)};return(h,m)=>{const g=S("LoadingGif"),D=S("RouterLink");return c(),a("div",te,[o(p).cartItems.length?(c(),a("div",ce,[x.value?(c(),a("div",He,oo)):(c(),a("div",se,[ae,t(o(Q),{onSubmit:E,onInvalidSubmit:P,"validation-schema":o(U),class:"checkout-info__form checkout-form"},{default:C(()=>[e("div",_e,[e("div",ne,[e("div",re,[e("div",le,[t(o(s),{name:"phone",type:"text",placeholder:"Телефон",class:"checkout-form__input"}),t(o(_),{name:"phone",class:"checkout-form__wrong-input"})]),e("div",ie,[e("div",ue,[e("ul",me,[(c(!0),a(B,null,F(M.value,n=>(c(),a("li",null,[e("span",{onClick:G=>l.value=n.tabNumber,class:y(["form-tab__button",[n.icon,n.tabNumber===l.value?"active":""]])},O(n.text),11,de)]))),256))]),e("div",he,[l.value===1?(c(),a("div",fe,[e("div",ve,[e("div",pe,[e("label",ke,[W(e("input",{type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=n=>k.value=n)},null,512),[[X,k.value]]),be,ge]),e("div",ye,[t(o(s),{name:"change",type:"text",placeholder:"Сумма",disabled:!k.value,class:"checkout-form__input"},null,8,["disabled"])])])])])):d("",!0),l.value===2?(c(),a("div",we,[e("div",xe,[e("div",Se,[t(o(s),{name:"card",type:"number",placeholder:"Номер карты",class:"checkout-form__input"}),t(o(_),{name:"card",class:"checkout-form__wrong-input"})]),e("div",Ce,[e("div",Ne,[t(o(s),{name:"cvv",type:"number",placeholder:"cvv",class:"checkout-form__input"}),t(o(_),{name:"cvv",class:"checkout-form__wrong-input"})]),e("div",Be,[t(o(s),{name:"cv",type:"number",placeholder:"cv",class:"checkout-form__input"}),t(o(_),{name:"cv",class:"checkout-form__wrong-input"})])])])])):d("",!0)])])]),e("div",Fe,[t(o(s),{name:"comment",type:"text",as:"textarea",placeholder:"Комментарий к заказу",class:"checkout-form__textarea"})]),e("div",Oe,[t(o(s),{name:"promo",type:"text",placeholder:"Промокод(если есть)",class:"checkout-form__input"}),t(o(_),{name:"promo",class:"checkout-form__wrong-input"})]),Ve])]),e("div",ze,[e("div",Ie,[e("ul",Te,[(c(!0),a(B,null,F(R.value,n=>(c(),a("li",null,[e("span",{onClick:G=>i.value=n.tabNumber,class:y(["form-tab__button",[n.tabNumber===i.value?"active":""]])},O(n.text),11,Le)]))),256))]),e("div",Me,[i.value===1?(c(),a("div",Re,[e("div",Ue,[e("div",Ee,[e("div",Pe,[t(o(s),{name:"street",type:"text",placeholder:"Улица",class:"checkout-form__input"}),t(o(_),{name:"street",class:"checkout-form__wrong-input"})]),e("div",De,[t(o(s),{name:"house",type:"number",placeholder:"Дом",class:"checkout-form__input"}),t(o(_),{name:"house",class:"checkout-form__wrong-input"})]),e("div",Ge,[t(o(s),{name:"flat",type:"number",placeholder:"Кв.",class:"checkout-form__input"}),t(o(_),{name:"flat",class:"checkout-form__wrong-input"})]),e("div",$e,[t(o(s),{name:"floor",type:"number",placeholder:"Этаж",class:"checkout-form__input"}),t(o(_),{name:"floor",class:"checkout-form__wrong-input"})]),e("div",qe,[t(o(s),{name:"entrance",type:"number",placeholder:"Подъезд",class:"checkout-form__input"}),t(o(_),{name:"entrance",class:"checkout-form__wrong-input"})]),e("div",Je,[t(o(s),{name:"code",type:"number",placeholder:"Почт. код",class:"checkout-form__input"}),t(o(_),{name:"code",class:"checkout-form__wrong-input"})])])])])):d("",!0),i.value===2?(c(),a("div",Ke,[e("div",We,[e("div",Xe,[e("div",Ye,[t(o(s),{name:"date",type:"text",placeholder:"Дата прибытия",class:"checkout-form__input"}),t(o(_),{name:"date",class:"checkout-form__wrong-input"})]),e("div",Ze,[t(o(s),{name:"time",type:"text",placeholder:"Время прибытия",class:"checkout-form__input"}),t(o(_),{name:"time",class:"checkout-form__wrong-input"})])])])])):d("",!0)])])])]),v.value?d("",!0):(c(),a("div",je,[e("button",{class:y(["btn",{wiggle:b.value}]),type:"submit"},"Оформить заказ",2)])),v.value?(c(),N(g,{key:1})):d("",!0),Ae]),_:1},8,["validation-schema"]),o(V).getSize<991.98?(c(),N(A,{key:0,class:"checkout-info__details"})):d("",!0)]))])):(c(),a("div",to,[co,e("div",so,[t(D,{to:"/"},{default:C(()=>[Y("На главную")]),_:1})])]))])}}},lo=$(ao,[["__scopeId","data-v-b1a62604"]]);export{lo as default};
