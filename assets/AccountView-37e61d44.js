import{_ as F,u as M,z as T,q as L,r as u,A as N,a as w,o as _,c as m,e as s,k as i,v as r,d as e,t as h,b as a,w as y,F as D,j as p,E as b,T as G,i as g,g as U,p as O,l as j}from"./index-bfef6200.js";const c=l=>(O("data-v-6638b04b"),l=l(),j(),l),q={class:"user-account"},z={key:0,class:"user-account__body"},R=c(()=>e("div",{class:"user-account__main-title"},"Информация о вас",-1)),$={class:"user-account__info"},H={class:"user-account__all-info"},J={class:"user-account__info-block"},K=c(()=>e("div",{class:"user-account__info-text"},"Имя:",-1)),P={class:"user-account__info-value"},Q={class:"user-account__info-block"},W=c(()=>e("div",{class:"user-account__info-text"},"email:",-1)),X={class:"user-account__info-value"},Y={class:"user-account__info-block"},Z=c(()=>e("div",{class:"user-account__info-text"},"Телефон:",-1)),ee={class:"user-account__info-value"},se={class:"user-account__edit"},te={class:"edit-form__elements"},oe={class:"edit-form__element"},ae=c(()=>e("div",{class:"edit-form__element-title"},"Ваш эмайл",-1)),ce={class:"edit-form__element"},ne=c(()=>e("div",{class:"edit-form__element-title"},"Имя",-1)),_e={class:"edit-form__element"},ie=c(()=>e("div",{class:"edit-form__element-title"},"Телефон",-1)),re={class:"edit-form__element"},ue=["disabled"],le={key:0,class:"edit-form__success"},de={class:"user-account__actions"},me={key:1,class:"user-account__no-user"},ve={__name:"AccountView",setup(l){const{userEditSchema:x}=M(),t=T(),S=L(),o=u(!1),d=u(!1),v=u(!1),f=u(!1),E=u("Произошла ошибка при обновлении информации о вас(!"),V=()=>{window.confirm("Вы уверены что хотите выйти с аккаунта?")&&(t.logOutUser(),S.push("/"))},A=async k=>{d.value=!0;let n=await t.updateUserInfo(k);n.isUpdated?(f.value=!0,setTimeout(()=>{f.value=!1,o.value=!1},2500)):n.err&&(E.value=n.err,v.value=!0,setTimeout(()=>v.value=!1,5e3)),d.value=!1},I=N(()=>({email:t.currentUser.email,name:t.currentUser.name,phone:t.currentUser.phone}));return(k,n)=>{const C=w("LoadingGif"),B=w("VErrorMessage");return _(),m("div",q,[s(t).currentUser?(_(),m("div",z,[R,i(e("div",$,[e("div",H,[e("div",J,[K,e("div",P,h(s(t).currentUser.name),1)]),e("div",Q,[W,e("div",X,h(s(t).currentUser.email),1)]),e("div",Y,[Z,e("div",ee,h(s(t).currentUser.phone),1)])])],512),[[r,!o.value]]),i(e("div",se,[a(s(D),{onSubmit:A,class:"user-account__edit-form edit-form","validation-schema":s(x),"initial-values":s(I)},{default:y(()=>[e("div",te,[e("div",oe,[ae,a(s(p),{name:"email",type:"text",class:"edit-form__element-input"}),a(s(b),{name:"email",class:"edit-form__wrong-data"})]),e("div",ce,[ne,a(s(p),{name:"name",type:"text",class:"edit-form__element-input"}),a(s(b),{name:"name",class:"edit-form__wrong-data"})]),e("div",_e,[ie,a(s(p),{name:"phone",type:"text",class:"edit-form__element-input"}),a(s(b),{name:"phone",class:"edit-form__wrong-data"})]),i(e("div",re,[i(e("button",{disabled:d.value,type:"submit",class:"user-account__btn user-account__btn_update"}," Обновить данные! ",8,ue),[[r,o.value]]),a(G,{name:"message"},{default:y(()=>[f.value?(_(),m("div",le," Информация о вас была успешно обновлена! ")):g("",!0)]),_:1})],512),[[r,o.value]]),d.value?(_(),U(C,{key:0,class:"edit-form__loading"})):g("",!0),v.value?(_(),U(B,{key:1,"error-message":"Ошибка при обновлении информации"})):g("",!0)])]),_:1},8,["validation-schema","initial-values"])],512),[[r,o.value]]),e("div",de,[e("button",{class:"user-account__btn user-account__btn_edit",onClick:n[0]||(n[0]=fe=>o.value=!o.value)},[i(e("span",null,"Изменить данные ",512),[[r,!o.value]]),i(e("span",null," Отменить изменение ",512),[[r,o.value]])]),e("button",{class:"user-account__btn",onClick:V}," Выйти с аккаунта ")])])):(_(),m("div",me," Не удалось получить данные о пользователе "))])}}},pe=F(ve,[["__scopeId","data-v-6638b04b"]]);export{pe as default};
