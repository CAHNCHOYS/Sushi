import{_ as $,x as j,Q as q,c as Q,r as l,C as W,a as C,o as c,b as a,u as o,d as t,w as S,F as A,i as N,g as d,e,h as s,E as _,O,P as B,n as y,t as V,D as H,R as J,j as K,p as X,k as Y,V as Z}from"./index-390edbfe.js";import{u as ee}from"./useFormSchemas-b0318b89.js";const oe=""+new URL("PizzaOrder-3619b994.png",import.meta.url).href;const u=f=>(X("data-v-b1a62604"),f=f(),Y(),f),te={class:"checkout-info"},ce={key:0,class:"checkout-info__items"},se={key:0,class:"checkout-info__body"},ae=u(()=>e("div",{class:"checkout-info__title"},"Ваши данные",-1)),_e={class:"checkout-form__row"},ne={class:"checkout-form__col"},le={class:"checkout-form__elements"},re={class:"checkout-form__element"},ie={class:"checkout-form__element"},ue={class:"checkout-form__tabs form-tab"},me={class:"form-tab__tab-menu"},de=["onClick"],he={class:"form-tab__all-tabs"},fe={key:0,class:"form-tab__tab"},ve={class:"checkout-form__elements"},ke={class:"checkout-form__elem-row"},pe={class:"checkout-form__checkbox"},be=u(()=>e("div",{class:"checkout-form__checkbox-emulator"},null,-1)),ge=u(()=>e("div",{class:"checkout-form__checkbox-text"}," Подготовить сдачу с ",-1)),ye={class:"checkout-form__input-col"},we={key:1,class:"form-tab__tab"},xe={class:"checkout-form__elements"},Ce={class:"checkout-form__element"},Se={class:"checkout-form__elem-row"},Ne={class:"checkout-form__elem-col"},Oe={class:"checkout-form__elem-col"},Be={class:"checkout-form__element"},Ve={class:"checkout-form__element"},ze=u(()=>e("div",{class:"checkout-form__element"},null,-1)),Fe={class:"checkout-form__col"},Ie={class:"checkout-form__tabs form-tab"},Te={class:"form-tab__tab-menu"},Le=["onClick"],Re={class:"form-tab__all-tabs"},Me={key:0,class:"form-tab__tab"},Pe={class:"checkout-form__elements"},Ue={class:"checkout-form__grid"},De={class:"checkout-form__grid-col checkout-form__grid-col_big"},Ee={class:"checkout-form__grid-col"},Ge={class:"checkout-form__grid-col"},$e={class:"checkout-form__grid-col"},je={class:"checkout-form__grid-col"},qe={class:"checkout-form__grid-col"},Qe={key:1,class:"form-tab__tab"},We={class:"checkout-form__elements"},Ae={class:"checkout-form__elem-row"},He={class:"checkout-form__elem-col"},Je={class:"checkout-form__elem-col"},Ke={key:0,class:"checkout-form__submit"},Xe=u(()=>e("div",{class:"checkout-form__rights"}," Оформите заказ ! прямо сейчас ",-1)),Ye={key:1,class:"checkout-info__order-done done-order"},Ze=u(()=>e("div",{class:"done-order__image _ibg"},[e("img",{src:oe,alt:"Pizza picture"})],-1)),eo=u(()=>e("div",{class:"done-order__text"}," Ваш заказ был успешно оформлен, готовьте деньги! ",-1)),oo=[Ze,eo],to={key:1,class:"checkout-info__no-items no-items"},co=u(()=>e("div",{class:"no-items__title"}," Невозможно оформить заказ с пустой козиной! ",-1)),so={class:"no-items__button"},ao={__name:"CheckoutView",setup(f){const k=j(),z=q();Q({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!0,validateOnModelUpdate:!0});const{orderSchemaCashByCourier:F,orderShemaCardByCourier:I,orderSchemaCashBySelf:T,orderSchemaCardBySelf:L}=ee(),r=l(1),R=l([{text:"Наличка",icon:"icon-Frame-11",tabNumber:1},{text:"Карта",icon:"icon-credit-cart",tabNumber:2}]),i=l(1),M=l([{text:"Курьером",tabNumber:1},{text:"Самовывоз",tabNumber:2}]),P=W(()=>{if(i.value===1&&r.value===1)return console.log("y"),F;if(i.value===2&&r.value===1)return console.log("yy"),T;if(i.value===1&&r.value===2)return console.log("yyy"),I;if(i.value===2&&r.value===2)return console.log("yyyy"),L}),p=l(!1),b=l(!1),w=l(!1),v=l(!1),x=l(!1),U=async h=>{console.log(h),v.value=!0,h.promo&&k.updateUserPromo(h.promo);const m=await k.commitOrder();m.length&&(x.value=!0),m.err&&(w.value=!0,setTimeout(()=>w.value=!1,2500)),v.value=!1},D=({values:h,errors:m,results:g})=>{console.log(h),console.log(m),console.log(g),b.value=!0,setTimeout(()=>b.value=!1,500)};return(h,m)=>{const g=C("LoadingGif"),E=C("RouterLink");return c(),a("div",te,[o(k).cartItems.length?(c(),a("div",ce,[x.value?(c(),a("div",Ye,oo)):(c(),a("div",se,[ae,t(o(A),{onSubmit:U,onInvalidSubmit:D,"validation-schema":o(P),class:"checkout-info__form checkout-form"},{default:S(()=>[e("div",_e,[e("div",ne,[e("div",le,[e("div",re,[t(o(s),{name:"phone",type:"text",placeholder:"Телефон",class:"checkout-form__input"}),t(o(_),{name:"phone",class:"checkout-form__wrong-input"})]),e("div",ie,[e("div",ue,[e("ul",me,[(c(!0),a(O,null,B(R.value,n=>(c(),a("li",null,[e("span",{onClick:G=>r.value=n.tabNumber,class:y(["form-tab__button",[n.icon,n.tabNumber===r.value?"active":""]])},V(n.text),11,de)]))),256))]),e("div",he,[r.value===1?(c(),a("div",fe,[e("div",ve,[e("div",ke,[e("label",pe,[H(e("input",{type:"checkbox","onUpdate:modelValue":m[0]||(m[0]=n=>p.value=n)},null,512),[[J,p.value]]),be,ge]),e("div",ye,[t(o(s),{name:"change",type:"text",placeholder:"Сумма",disabled:!p.value,class:"checkout-form__input"},null,8,["disabled"])])])])])):d("",!0),r.value===2?(c(),a("div",we,[e("div",xe,[e("div",Ce,[t(o(s),{name:"card",type:"number",placeholder:"Номер карты",class:"checkout-form__input"}),t(o(_),{name:"card",class:"checkout-form__wrong-input"})]),e("div",Se,[e("div",Ne,[t(o(s),{name:"cvv",type:"number",placeholder:"cvv",class:"checkout-form__input"}),t(o(_),{name:"cvv",class:"checkout-form__wrong-input"})]),e("div",Oe,[t(o(s),{name:"cv",type:"number",placeholder:"cv",class:"checkout-form__input"}),t(o(_),{name:"cv",class:"checkout-form__wrong-input"})])])])])):d("",!0)])])]),e("div",Be,[t(o(s),{name:"comment",type:"text",as:"textarea",placeholder:"Комментарий к заказу",class:"checkout-form__textarea"})]),e("div",Ve,[t(o(s),{name:"promo",type:"text",placeholder:"Промокод(если есть)",class:"checkout-form__input"}),t(o(_),{name:"promo",class:"checkout-form__wrong-input"})]),ze])]),e("div",Fe,[e("div",Ie,[e("ul",Te,[(c(!0),a(O,null,B(M.value,n=>(c(),a("li",null,[e("span",{onClick:G=>i.value=n.tabNumber,class:y(["form-tab__button",[n.tabNumber===i.value?"active":""]])},V(n.text),11,Le)]))),256))]),e("div",Re,[i.value===1?(c(),a("div",Me,[e("div",Pe,[e("div",Ue,[e("div",De,[t(o(s),{name:"street",type:"text",placeholder:"Улица",class:"checkout-form__input"}),t(o(_),{name:"street",class:"checkout-form__wrong-input"})]),e("div",Ee,[t(o(s),{name:"house",type:"number",placeholder:"Дом",class:"checkout-form__input"}),t(o(_),{name:"house",class:"checkout-form__wrong-input"})]),e("div",Ge,[t(o(s),{name:"flat",type:"number",placeholder:"Кв.",class:"checkout-form__input"}),t(o(_),{name:"flat",class:"checkout-form__wrong-input"})]),e("div",$e,[t(o(s),{name:"floor",type:"number",placeholder:"Этаж",class:"checkout-form__input"}),t(o(_),{name:"floor",class:"checkout-form__wrong-input"})]),e("div",je,[t(o(s),{name:"entrance",type:"number",placeholder:"Подъезд",class:"checkout-form__input"}),t(o(_),{name:"entrance",class:"checkout-form__wrong-input"})]),e("div",qe,[t(o(s),{name:"code",type:"number",placeholder:"Почт. код",class:"checkout-form__input"}),t(o(_),{name:"code",class:"checkout-form__wrong-input"})])])])])):d("",!0),i.value===2?(c(),a("div",Qe,[e("div",We,[e("div",Ae,[e("div",He,[t(o(s),{name:"date",type:"text",placeholder:"Дата прибытия",class:"checkout-form__input"}),t(o(_),{name:"date",class:"checkout-form__wrong-input"})]),e("div",Je,[t(o(s),{name:"time",type:"text",placeholder:"Время прибытия",class:"checkout-form__input"}),t(o(_),{name:"time",class:"checkout-form__wrong-input"})])])])])):d("",!0)])])])]),v.value?d("",!0):(c(),a("div",Ke,[e("button",{class:y(["btn",{wiggle:b.value}]),type:"submit"},"Оформить заказ",2)])),v.value?(c(),N(g,{key:1})):d("",!0),Xe]),_:1},8,["validation-schema"]),o(z).getSize<991.98?(c(),N(Z,{key:0,class:"checkout-info__details"})):d("",!0)]))])):(c(),a("div",to,[co,e("div",so,[t(E,{to:"/"},{default:S(()=>[K("На главную")]),_:1})])]))])}}},lo=$(ao,[["__scopeId","data-v-b1a62604"]]);export{lo as default};
