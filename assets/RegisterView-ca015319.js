import{_ as U,c as j,r as c,a as v,o as _,b as l,d as t,w as i,T as g,e,u as s,F as G,f as M,g as r,t as A,h as d,E as u,n as z,i as J,j as x,p as K,k as P}from"./index-19896134.js";import{u as q}from"./useFormSchemas-c1889a27.js";const n=m=>(K("data-v-1140f9e9"),m=m(),P(),m),H={class:"fullscreen"},Q={key:0,class:"message message_same-user"},W=n(()=>e("div",{class:"message__body"}," Упс, пользователь с такой же почтой уже существует ( ",-1)),X=[W],Y={key:0,class:"message message_error"},Z={class:"message__body"},$={key:0,class:"message message_success"},ee=n(()=>e("div",{class:"message__body"},"Пользователь добавлен в базу данных !)",-1)),se=[ee],oe={class:"fullscreen__body"},te={class:"fullscreen__content"},ae={class:"fullscreen__form-body"},ne=n(()=>e("div",{class:"action-form__title"},"Регистрация",-1)),ce={class:"action-form__elements"},ie={class:"action-form__element"},_e={class:"action-form__input-body"},le=n(()=>e("div",{class:"action-form__placeholder"},"ФИО",-1)),re={class:"action-form__element"},de={class:"action-form__input-body"},ue=n(()=>e("div",{class:"action-form__placeholder"},"Email",-1)),me={class:"action-form__element"},fe={class:"action-form__input-body"},pe=n(()=>e("div",{class:"action-form__placeholder"},"Номер телефона",-1)),he={class:"action-form__element"},ve={class:"action-form__element"},ge={class:"action-form__input-body"},ye=n(()=>e("div",{class:"action-form__placeholder"},"Пароль",-1)),be={class:"action-form__element"},ke={class:"action-form__input-body"},Se=n(()=>e("div",{class:"action-form__placeholder"},"Повторите пароль",-1)),we={class:"action-form__element"},Be=["disabled"],Fe={key:0,class:"action-form__login-btn"},Ce={__name:"RegisterView",setup(m){j({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!0,validateOnModelUpdate:!0});const y=c(!1),b=c(!1),w=c(!1),f=c(!1),B=c("Произошла ошибка"),F=c(["Москва","СПБ","Донецк","Ростов"]),C=c(F.value[0]),T=o=>{C.value=o},{registerSchema:I,isErr:k,toggleBlur:p,toggleFocus:h,isInvalidForm:L,invalidSubmit:R}=q(),O=async(o,{resetForm:V})=>{f.value=!0;let S={...o,name:o.username,city:C.value};const a=await M("/api/register",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(S)});console.log(a),a.isSuccess?(y.value=!0,setTimeout(()=>y.value=!1,3e3),V(),w.value=!0):a.isSameUser?(b.value=!0,setTimeout(()=>b.value=!1,3e3)):a.err&&(console.log(a.err),B.value=a.err,k.value=!0,setTimeout(()=>k.value=!1,3e3)),f.value=!1},E=o=>{console.log(o.key),o.key>="0"&&o.key<="9"||o.key=="+"||o.key=="Backspace"||o.key=="("||o.key==")"||o.key=="-"||o.key=="ArrowLeft"||o.key=="ArrowRight"||o.key=="Delete"||o.key=="Tab"||o.key==" "||o.preventDefault()};return(o,V)=>{const S=v("VCustomSelect"),a=v("LoadingGif"),N=v("router-link"),D=v("RouterLink");return _(),l("div",H,[t(g,{name:"message"},{default:i(()=>[b.value?(_(),l("div",Q,X)):r("",!0)]),_:1}),t(g,{name:"message"},{default:i(()=>[s(k)?(_(),l("div",Y,[e("div",Z,A(B.value),1)])):r("",!0)]),_:1}),t(g,{name:"message"},{default:i(()=>[y.value?(_(),l("div",$,se)):r("",!0)]),_:1}),e("div",oe,[e("div",te,[e("div",ae,[t(s(G),{onSubmit:O,onInvalidSubmit:s(R),class:"fullscreen__form action-form","validation-schema":s(I)},{default:i(()=>[ne,e("div",ce,[e("div",ie,[e("div",_e,[le,t(s(d),{class:"action-form__input",type:"text",name:"username",onFocus:s(h),onBlur:s(p)},null,8,["onFocus","onBlur"])]),t(s(u),{class:"action-form__error-msg",name:"username"})]),e("div",re,[e("div",de,[ue,t(s(d),{class:"action-form__input",name:"email",type:"text",onFocus:s(h),onBlur:s(p)},null,8,["onFocus","onBlur"])]),t(s(u),{class:"action-form__error-msg",name:"email"})]),e("div",me,[e("div",fe,[pe,t(s(d),{class:"action-form__input",name:"phone",type:"text",placeholder:"+7949 381 39 82",onFocus:s(h),onKeydown:E,onBlur:s(p)},null,8,["onFocus","onBlur"])]),t(s(u),{class:"action-form__error-msg",name:"phone"})]),e("div",he,[t(S,{"background-color":"#f8f1ff","default-title":"Ваш город",onUpdateValue:T,options:F.value},null,8,["options"])]),e("div",ve,[e("div",ge,[ye,t(s(d),{class:"action-form__input",name:"password",onFocus:s(h),onBlur:s(p),type:"password"},null,8,["onFocus","onBlur"])]),t(s(u),{class:"action-form__error-msg",name:"password"})]),e("div",be,[e("div",ke,[Se,t(s(d),{class:"action-form__input",name:"passwordRepeat",type:"password"})]),t(s(u),{class:"action-form__error-msg",name:"passwordRepeat"})]),e("div",we,[e("button",{disabled:f.value,class:z(["action-form__btn",{err:s(L)}]),type:"submit"}," Регистрация ",10,Be)]),f.value?(_(),J(a,{key:0})):r("",!0)])]),_:1},8,["onInvalidSubmit","validation-schema"]),t(g,{name:"login-btn"},{default:i(()=>[w.value?(_(),l("div",Fe,[t(N,{class:"action-form__btn",to:"/Login"},{default:i(()=>[x("Перейти к авторизации")]),_:1})])):r("",!0)]),_:1})]),t(D,{class:"home-button",to:"/"},{default:i(()=>[x("На главную")]),_:1})])])])}}},Te=U(Ce,[["__scopeId","data-v-1140f9e9"]]);export{Te as default};
