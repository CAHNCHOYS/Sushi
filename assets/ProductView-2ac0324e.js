import{r as m,A as D,f as G,_ as M,H as N,a as g,I as z,o,b as d,e as s,d as p,u as e,i as k,g as c,D as P,t as n,G as T,w as v,T as h,p as F,k as H}from"./index-1c3f7b65.js";const U=r=>{const _=m(null),i=m(!1),l=m(!1),t=m("Произошла ошибка(");return D(r,async()=>{i.value=!0,_.value=null;const a=await G(`/api/products/${r.name}/${r.id}`);a.length&&(_.value=a[0],_.value.count=1),a.err&&(t.value=a.err,l.value=!0,console.log(a.err)),i.value=!1},{immediate:!0}),{pageProduct:_,isLoading:i,isErr:l,errorMessage:t}};const w=r=>(F("data-v-eb3b3af8"),r=r(),H(),r),j={class:"product-page"},q={class:"product-page__back-button"},J={class:"product-page__product-body"},K={key:1,class:"product-page__product-content product"},O={class:"product__row"},Q={class:"product__picture-col"},R={class:"product__picture _ibg"},W=["alt"],X={class:"product__info-col"},Y={class:"product__name"},Z={class:"product__size"},ee={class:"product__actions"},te={class:"product__price"},se={class:"product__current-price"},oe={key:0,class:"product__old-price"},ce={class:"product__count count-product"},de={class:"count-product__row"},re={class:"count-product__number"},ae={key:0,class:"product__consist"},ne=w(()=>s("h3",null,"Состав",-1)),_e={class:"product__add-to-cart"},ie={key:0,class:"product-page__message product-message_success"},ue={key:0,class:"product-page__message product-message_error"},pe={key:0,class:"product-page__message product-message_same"},le={key:0,class:"product-page__message product-message_error"},me={key:3},ge={key:0,class:"product-page__recommended-products recomended-products"},ve=w(()=>s("div",{class:"recomended-products__title"},"Рекомендованные товары ",-1)),he={class:"recomended-products__slider"},ke={__name:"ProductView",props:{id:Number,name:String},setup(r){const _=r,{isErr:i,isLoading:l,pageProduct:t,errorMessage:a}=U(_),{addProductAction:S,isActionLoading:f,isNotLoggedUser:V,isAlreadyInCart:B,isProductAdded:C,actionErrorMessage:E,isAddProductError:x}=N();return(fe,u)=>{const A=g("VGoBackButton"),y=g("LoadingGif"),L=g("VErrorMessage"),I=g("ProductsSlider"),$=z("lazy");return o(),d("div",j,[s("div",q,[p(A)]),s("div",J,[e(l)?(o(),k(y,{key:0})):c("",!0),e(t)?(o(),d("div",K,[s("div",O,[s("div",Q,[s("div",R,[P(s("img",{alt:e(t).name},null,8,W),[[$,{src:`https://sushi-backend-henna.vercel.app/Products/${e(t).image}`,loading:"https://sushi-backend-henna.vercel.app/Load.gif",error:"https://sushi-backend-henna.vercel.app/Err.png"}]])])]),s("div",X,[s("div",Y,n(e(t).name),1),s("div",Z,n(e(t).textSize),1),s("div",ee,[s("div",te,[s("div",se,n(e(t).Price*e(t).count)+"₽",1),e(t).oldPrice?(o(),d("div",oe,n(e(t).oldPrice*e(t).count)+"₽ ",1)):c("",!0)]),s("div",ce,[s("div",de,[s("div",{class:"count-product__action count-product__action_minus",onClick:u[0]||(u[0]=b=>e(t).count<=1?"":e(t).count--)}),s("div",re,n(e(t).count),1),s("div",{class:"count-product__action icon-plus",onClick:u[1]||(u[1]=b=>e(t).count++)})])])]),e(t).consists?(o(),d("div",ae,[ne,s("p",null,n(e(t).consists),1)])):c("",!0),s("div",_e,[P(s("button",{class:"btn icon-cart",onClick:u[2]||(u[2]=b=>e(S)({product_id:e(t).product_id,count:e(t).count,name:e(t).name,image:e(t).image,Price:e(t).Price}))},"Хочу!",512),[[T,!e(f)]])]),e(f)?(o(),k(y,{key:1,class:"product__action-load"})):c("",!0),p(h,{name:"product-message"},{default:v(()=>[e(C)?(o(),d("div",ie," Товар добавлен в корзину! ")):c("",!0)]),_:1}),p(h,{name:"product-message"},{default:v(()=>[e(x)?(o(),d("div",ue,n(e(E)),1)):c("",!0)]),_:1}),p(h,{name:"product-message"},{default:v(()=>[e(B)?(o(),d("div",pe," Упс, товар уже находится в корзине! ")):c("",!0)]),_:1}),p(h,{name:"product-message"},{default:v(()=>[e(V)?(o(),d("div",le," Для добавления товара в корзину необходимо сначала войти в аккаунт! ")):c("",!0)]),_:1})])])])):c("",!0),e(i)?(o(),k(L,{key:2,style:{"margin-bottom":"20px"},"err-message":e(a)},null,8,["err-message"])):c("",!0),!e(l)&&!e(t)&&!e(i)?(o(),d("p",me,"Не удалось найти товар с таким именем и айди, проверьте ссылку! ")):c("",!0)]),e(t)?(o(),d("div",ge,[ve,s("div",he,[p(I,{"recommended-products":e(t).recommendedCat},null,8,["recommended-products"])])])):c("",!0)])}}},be=M(ke,[["__scopeId","data-v-eb3b3af8"]]);export{be as default};
