import{_ as F,u as M,q as T,a as L,r,y as N,b as w,o as n,c as m,f as s,k as _,v as i,e,t as p,d as a,w as k,F as D,z as G,j as b,E as g,T as O,i as y,g as U,p as j,l as q}from"./index-141dfb7c.js";const c=u=>(j("data-v-fce0b789"),u=u(),q(),u),z={class:"user-account"},R={key:0,class:"user-account__body"},$=c(()=>e("div",{class:"user-account__main-title"},"Информация о вас",-1)),H={class:"user-account__info"},J={class:"user-account__all-info"},K={class:"user-account__info-block"},P=c(()=>e("div",{class:"user-account__info-text"},"Имя:",-1)),Q={class:"user-account__info-value"},W={class:"user-account__info-block"},X=c(()=>e("div",{class:"user-account__info-text"},"email:",-1)),Y={class:"user-account__info-value"},Z={class:"user-account__info-block"},ee=c(()=>e("div",{class:"user-account__info-text"},"Телефон:",-1)),se={class:"user-account__info-value"},te={class:"user-account__edit"},oe={class:"edit-form__elements"},ae={class:"edit-form__element"},ce=c(()=>e("div",{class:"edit-form__element-title"},"Ваш эмайл",-1)),ne={class:"edit-form__element"},_e=c(()=>e("div",{class:"edit-form__element-title"},"Имя",-1)),ie={class:"edit-form__element"},re=c(()=>e("div",{class:"edit-form__element-title"},"Телефон",-1)),ue={class:"edit-form__element"},le=["disabled"],de={key:0,class:"edit-form__success"},me={class:"user-account__actions"},ve={key:1,class:"user-account__no-user"},fe={__name:"AccountView",setup(u){const{userEditSchema:S}=M(),x=T(),t=L(),o=r(!1),l=r(!1),v=r(!1),f=r(!1),E=r(""),V=async h=>{l.value=!0;try{h.id=t.currentUser.id,await G(h),await t.getUser(),f.value=!0,setTimeout(()=>{f.value=!1,o.value=!1},2500)}catch(d){E.value=d.message,v.value=!0,setTimeout(()=>v.value=!1,5e3)}l.value=!1},A=()=>{window.confirm("Вы уверены что хотите выйти с аккаунта?")&&(t.logOutUser(),x.push("/"))},I=N(()=>({email:t.currentUser.email,name:t.currentUser.name,phone:t.currentUser.phone}));return(h,d)=>{const C=w("LoadingGif"),B=w("VErrorMessage");return n(),m("div",z,[s(t).currentUser?(n(),m("div",R,[$,_(e("div",H,[e("div",J,[e("div",K,[P,e("div",Q,p(s(t).currentUser.name),1)]),e("div",W,[X,e("div",Y,p(s(t).currentUser.email),1)]),e("div",Z,[ee,e("div",se,p(s(t).currentUser.phone),1)])])],512),[[i,!o.value]]),_(e("div",te,[a(s(D),{onSubmit:V,class:"user-account__edit-form edit-form","validation-schema":s(S),"initial-values":s(I)},{default:k(()=>[e("div",oe,[e("div",ae,[ce,a(s(b),{name:"email",type:"text",class:"edit-form__element-input"}),a(s(g),{name:"email",class:"edit-form__wrong-data"})]),e("div",ne,[_e,a(s(b),{name:"name",type:"text",class:"edit-form__element-input"}),a(s(g),{name:"name",class:"edit-form__wrong-data"})]),e("div",ie,[re,a(s(b),{name:"phone",type:"text",class:"edit-form__element-input"}),a(s(g),{name:"phone",class:"edit-form__wrong-data"})]),_(e("div",ue,[_(e("button",{disabled:l.value,type:"submit",class:"user-account__btn user-account__btn_update"}," Обновить данные! ",8,le),[[i,o.value]]),a(O,{name:"message"},{default:k(()=>[f.value?(n(),m("div",de," Информация была успешно обновлена! ")):y("",!0)]),_:1})],512),[[i,o.value]]),l.value?(n(),U(C,{key:0,class:"edit-form__loading"})):y("",!0),v.value?(n(),U(B,{key:1,"error-message":"Ошибка при обновлении информации"})):y("",!0)])]),_:1},8,["validation-schema","initial-values"])],512),[[i,o.value]]),e("div",me,[e("button",{class:"user-account__btn user-account__btn_edit",onClick:d[0]||(d[0]=he=>o.value=!o.value)},[_(e("span",null,"Изменить данные ",512),[[i,!o.value]]),_(e("span",null," Отменить изменение ",512),[[i,o.value]])]),e("button",{class:"user-account__btn",onClick:A}," Выйти с аккаунта ")])])):(n(),m("div",ve," Не удалось получить данные о пользователе "))])}}},be=F(fe,[["__scopeId","data-v-fce0b789"]]);export{be as default};
